// @uppy/dashboard@4.3.2 downloaded from https://ga.jspm.io/npm:@uppy/dashboard@4.3.2/lib/index.js

import{UIPlugin as e}from"@uppy/core";import t from"@uppy/status-bar";import i from"@uppy/informer";import s from"@uppy/thumbnail-generator";import o from"@uppy/utils/lib/findAllDOMElements";import a from"@uppy/utils/lib/toArray";import l from"@uppy/utils/lib/getDroppedFiles";import{defaultPickerIcon as n}from"@uppy/provider-views";import{nanoid as r}from"nanoid/non-secure";import d from"memoize-one";import p from"@uppy/utils/lib/FOCUSABLE_ELEMENTS";import u from"lodash/debounce.js";import{h,Component as c}from"preact";import m from"classnames";import g from"@uppy/utils/lib/isDragDropSupported";import{useMemo as y}from"preact/hooks";import f from"@uppy/utils/lib/VirtualList";import{shallowEqualObjects as v}from"shallow-equal";import{M as b,F}from"../_/B1zDt04N.js";import P from"@transloadit/prettier-bytes";import C from"@uppy/utils/lib/truncateString";import w from"./components/AddFiles.js";import S from"./components/AddFilesPanel.js";import D from"./components/PickerPanelContent.js";import B from"./components/EditorPanel.js";import O from"./components/FileCard/index.js";import T from"./components/Slide.js";import E from"./locale.js";import"../_/CSp_IUXs.js";import"../_/DVrUIn0a.js";
/**
 * @returns {HTMLElement} - either dashboard element, or the overlay that's most on top
 */function getActiveOverlayEl(e,t){if(t){const i=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(i)return i}return e}function focusOnFirstNode(e,t){const i=t[0];if(i){i.focus();e.preventDefault()}}function focusOnLastNode(e,t){const i=t[t.length-1];if(i){i.focus();e.preventDefault()}}function isFocusInOverlay(e){return e.contains(document.activeElement)}function trapFocus(e,t,i){const s=getActiveOverlayEl(i,t);const o=a(s.querySelectorAll(p));const l=o.indexOf(document.activeElement);isFocusInOverlay(s)?e.shiftKey&&l===0?focusOnLastNode(e,o):e.shiftKey||l!==o.length-1||focusOnFirstNode(e,o):focusOnFirstNode(e,o)}function forInline(e,t,i){t===null||trapFocus(e,t,i)}function createSuperFocus(){let e=false;const superFocus=(t,i)=>{const s=getActiveOverlayEl(t,i);const o=s.contains(document.activeElement);if(o&&e)return;const a=s.querySelector("[data-uppy-super-focusable]");if(!o||a)if(a){a.focus({preventScroll:true});e=true}else{const t=s.querySelector(p);t==null||t.focus({preventScroll:true});e=false}};return u(superFocus,260)}function onPauseResumeCancelRetry(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id):e.uppy.retryUpload(e.file.id))}function progressIndicatorTitle(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function ProgressIndicatorButton(e){return h("div",{className:"uppy-Dashboard-Item-progress"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":progressIndicatorTitle(e),title:progressIndicatorTitle(e),onClick:()=>onPauseResumeCancelRetry(e)},e.children))}function ProgressCircleContainer(e){let{children:t}=e;return h("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},t)}function ProgressCircle(e){let{progress:t}=e;const i=2*Math.PI*15;return h("g",null,h("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),h("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":i,"stroke-dashoffset":i-i/100*t}))}function FileProgress(e){return e.file.progress.uploadStarted?e.file.progress.percentage===void 0?null:e.isUploaded?h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(ProgressCircleContainer,null,h("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),h("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):e.recoveredState?null:e.error&&!e.hideRetryButton?h(ProgressIndicatorButton,e,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},h("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),h("path",{d:"M7.9 3H10v2H7.9z"}),h("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),h("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?h(ProgressIndicatorButton,e,h(ProgressCircleContainer,null,h(ProgressCircle,{progress:e.file.progress.percentage}),e.file.isPaused?h("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):h("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},h("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),h("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(ProgressCircleContainer,null,h(ProgressCircle,{progress:e.file.progress.percentage})))):h(ProgressIndicatorButton,e,h(ProgressCircleContainer,null,h(ProgressCircle,{progress:e.file.progress.percentage}),h("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):null}const renderFileName=e=>{const{author:t,name:i}=e.file.meta;function getMaxNameLength(){return e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30}return h("div",{className:"uppy-Dashboard-Item-name",title:i},C(i,getMaxNameLength()))};const renderAuthor=e=>{var t;const{author:i}=e.file.meta;const s=(t=e.file.remote)==null?void 0:t.providerName;const o="·";return i?h("div",{className:"uppy-Dashboard-Item-author"},h("a",{href:`${i.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},C(i.name,13)),s?h(Fragment,null,` ${o} `,s,` ${o} `):null):null};const renderFileSize=e=>e.file.size&&h("div",{className:"uppy-Dashboard-Item-statusSize"},P(e.file.size));const ReSelectButton=e=>e.file.isGhost&&h("span",null," • ",h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>e.toggleAddFilesPanel(true)},e.i18n("reSelect")));const ErrorButton=e=>{let{file:t,onClick:i}=e;return t.error?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:i,type:"button"},"?"):null};function FileInfo(e){const{file:t,i18n:i,toggleFileCard:s,metaFields:o,toggleAddFilesPanel:a,isSingleFile:l,containerHeight:n,containerWidth:r}=e;return h("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source},h("div",{className:"uppy-Dashboard-Item-fileName"},renderFileName({file:t,isSingleFile:l,containerHeight:n,containerWidth:r}),h(ErrorButton,{file:t,onClick:()=>alert(t.error)})),h("div",{className:"uppy-Dashboard-Item-status"},renderAuthor({file:t}),renderFileSize({file:t}),ReSelectButton({file:t,toggleAddFilesPanel:a,i18n:i})),h(b,{file:t,i18n:i,toggleFileCard:s,metaFields:o}))}
/**
 * Copies text to clipboard by creating an almost invisible textarea,
 * adding text there, then running execCommand('copy').
 * Falls back to prompt() when the easy way fails (hello, Safari!)
 * From http://stackoverflow.com/a/30810322
 *
 * @param {string} textToCopy
 * @param {string} fallbackString
 * @returns {Promise}
 */function copyToClipboard(e,t){t===void 0&&(t="Copy the URL below");return new Promise((i=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"});s.value=e;document.body.appendChild(s);s.select();const magicCopyFailed=()=>{document.body.removeChild(s);window.prompt(t,e);i()};try{const e=document.execCommand("copy");if(!e)return magicCopyFailed();document.body.removeChild(s);return i()}catch(e){document.body.removeChild(s);return magicCopyFailed()}}))}function EditButton(e){let{file:t,uploadInProgressOrComplete:i,metaFields:s,canEditFile:o,i18n:a,onClick:l}=e;return!i&&s&&s.length>0||!i&&o(t)?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":a("editFileWithFilename",{file:t.meta.name}),title:a("editFileWithFilename",{file:t.meta.name}),onClick:()=>l()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},h("g",{fillRule:"evenodd"},h("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),h("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),h("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function RemoveButton(e){let{i18n:t,onClick:i,file:s}=e;return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile",{file:s.meta.name}),title:t("removeFile",{file:s.meta.name}),onClick:()=>i()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},h("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),h("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}function CopyLinkButton(e){let{file:t,uppy:i,i18n:s}=e;const copyLinkToClipboard=e=>{copyToClipboard(t.uploadURL,s("copyLinkToClipboardFallback")).then((()=>{i.log("Link copied to clipboard.");i.info(s("copyLinkToClipboardSuccess"),"info",3e3)})).catch(i.log).then((()=>e.target.focus({preventScroll:true})))};return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":s("copyLink"),title:s("copyLink"),onClick:e=>copyLinkToClipboard(e)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},h("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Buttons(e){const{uppy:t,file:i,uploadInProgressOrComplete:s,canEditFile:o,metaFields:a,showLinkToFileUploadResult:l,showRemoveButton:n,i18n:r,toggleFileCard:d,openFileEditor:p}=e;const editAction=()=>{a&&a.length>0?d(true,i.id):p(i)};return h("div",{className:"uppy-Dashboard-Item-actionWrapper"},h(EditButton,{i18n:r,file:i,uploadInProgressOrComplete:s,canEditFile:o,metaFields:a,onClick:editAction}),l&&i.uploadURL?h(CopyLinkButton,{file:i,uppy:t,i18n:r}):null,n?h(RemoveButton,{i18n:r,file:i,onClick:()=>t.removeFile(i.id)}):null)}class FileItem extends c{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!v(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props;const t=e.progress.preprocess||e.progress.postprocess;const i=!!e.progress.uploadComplete&&!t&&!e.error;const s=!!e.progress.uploadStarted||!!t;const o=e.progress.uploadStarted&&!e.progress.uploadComplete||t;const a=e.error||false;const{isGhost:l}=e;let n=(this.props.individualCancellation||!o)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(n=true);const r=m({"uppy-Dashboard-Item":true,"is-inprogress":o&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":l});return h("div",{className:r,id:`uppy_${e.id}`,role:this.props.role},h("div",{className:"uppy-Dashboard-Item-preview"},h(F,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),h(FileProgress,{uppy:this.props.uppy,file:e,error:a,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),h("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},h(FileInfo,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),h(Buttons,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:n,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function chunks(e,t){const i=[];let s=[];e.forEach((e=>{if(s.length<t)s.push(e);else{i.push(s);s=[e]}}));s.length&&i.push(s);return i}function FileList(e){let{id:t,i18n:i,uppy:s,files:o,resumableUploads:a,hideRetryButton:l,hidePauseResumeButton:n,hideCancelButton:r,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:p,metaFields:u,isSingleFile:c,toggleFileCard:m,handleRequestThumbnail:g,handleCancelThumbnail:v,recoveredState:b,individualCancellation:F,itemsPerRow:P,openFileEditor:C,canEditFile:w,toggleAddFilesPanel:S,containerWidth:D,containerHeight:B}=e;const O=P===1?71:200;const T=y((()=>{const sortByGhostComesFirst=(e,t)=>Number(o[t].isGhost)-Number(o[e].isGhost);const e=Object.keys(o);b&&e.sort(sortByGhostComesFirst);return chunks(e,P)}),[o,P,b]);const renderRow=e=>h("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:e[0]},e.map((e=>h(FileItem,{key:e,uppy:s,id:t,i18n:i,resumableUploads:a,individualCancellation:F,hideRetryButton:l,hidePauseResumeButton:n,hideCancelButton:r,showLinkToFileUploadResult:d,showRemoveButtonAfterComplete:p,metaFields:u,recoveredState:b,isSingleFile:c,containerWidth:D,containerHeight:B,toggleFileCard:m,handleRequestThumbnail:g,handleCancelThumbnail:v,role:"listitem",openFileEditor:C,canEditFile:w,toggleAddFilesPanel:S,file:o[e]}))));return c?h("div",{class:"uppy-Dashboard-files"},renderRow(T[0])):h(f,{class:"uppy-Dashboard-files",role:"list",data:T,renderRow:renderRow,rowHeight:O})}const L={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function getUploadingState(e,t,i,s){s===void 0&&(s={});if(e)return L.STATE_ERROR;if(t)return L.STATE_COMPLETE;if(i)return L.STATE_PAUSED;let o=L.STATE_WAITING;const a=Object.keys(s);for(let e=0;e<a.length;e++){const{progress:t}=s[a[e]];if(t.uploadStarted&&!t.uploadComplete)return L.STATE_UPLOADING;t.preprocess&&o!==L.STATE_UPLOADING&&(o=L.STATE_PREPROCESSING);t.postprocess&&o!==L.STATE_UPLOADING&&o!==L.STATE_PREPROCESSING&&(o=L.STATE_POSTPROCESSING)}return o}function UploadStatus(e){let{files:t,i18n:i,isAllComplete:s,isAllErrored:o,isAllPaused:a,inProgressNotPausedFiles:l,newFiles:n,processingFiles:r}=e;const d=getUploadingState(o,s,a,t);switch(d){case"uploading":return i("uploadingXFiles",{smart_count:l.length});case"preprocessing":case"postprocessing":return i("processingXFiles",{smart_count:r.length});case"paused":return i("uploadPaused");case"waiting":return i("xFilesSelected",{smart_count:n.length});case"complete":return i("uploadComplete");case"error":return i("error");default:}}function PanelTopBar(e){const{i18n:t,isAllComplete:i,hideCancelButton:s,maxNumberOfFiles:o,toggleAddFilesPanel:a,uppy:l}=e;let{allowNewUpload:n}=e;n&&o&&(n=e.totalFileCount<e.maxNumberOfFiles);return h("div",{className:"uppy-DashboardContent-bar"},i||s?h("div",null):h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>l.cancelAll()},t("cancel")),h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},h(UploadStatus,e)),n?h("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>a(true)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},h("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),h("span",{className:"uppy-DashboardContent-addMoreCaption"},t("addMore"))):h("div",null))}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},_extends.apply(null,arguments)}const I=900;const R=700;const k=576;const A=330;function Dashboard$1(e){const t=e.totalFileCount===0;const i=e.totalFileCount===1;const s=e.containerWidth>k;const o=e.containerHeight>A;const a=m({"uppy-Dashboard":true,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>k,"uppy-size--lg":e.containerWidth>R,"uppy-size--xl":e.containerWidth>I,"uppy-size--height-md":e.containerHeight>A,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&i&&o});let l=1;e.containerWidth>I?l=5:e.containerWidth>R?l=4:e.containerWidth>k&&(l=3);const n=e.showSelectedFiles&&!t;const r=e.recoveredState?Object.keys(e.recoveredState.files).length:null;const d=e.files?Object.keys(e.files).filter((t=>e.files[t].isGhost)).length:0;const renderRestoredText=()=>d>0?e.i18n("recoveredXFiles",{smart_count:d}):e.i18n("recoveredAllFiles");const p=h("div",{className:a,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&g(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},h("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),h("div",{className:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:e.inline?void 0:"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:h("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal},h("span",{"aria-hidden":"true"},"×")),h("div",{className:"uppy-Dashboard-innerWrap"},h("div",{className:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),n&&h(PanelTopBar,e),r&&h("div",{className:"uppy-Dashboard-serviceMsg"},h("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},h("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},h("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),h("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),h("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),h("strong",{className:"uppy-Dashboard-serviceMsg-title"},e.i18n("sessionRestored")),h("div",{className:"uppy-Dashboard-serviceMsg-text"},renderRestoredText())),n?h(FileList,{id:e.id,i18n:e.i18n,uppy:e.uppy,files:e.files,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:i,itemsPerRow:l,containerWidth:e.containerWidth,containerHeight:e.containerHeight}):h(w,{i18n:e.i18n,i18nArray:e.i18nArray,acquirers:e.acquirers,handleInputChange:e.handleInputChange,maxNumberOfFiles:e.maxNumberOfFiles,allowedFileTypes:e.allowedFileTypes,showNativePhotoCameraButton:e.showNativePhotoCameraButton,showNativeVideoCameraButton:e.showNativeVideoCameraButton,nativeCameraFacingMode:e.nativeCameraFacingMode,showPanel:e.showPanel,activePickerPanel:e.activePickerPanel,disableLocalFiles:e.disableLocalFiles,fileManagerSelectionType:e.fileManagerSelectionType,note:e.note,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy}),h(T,null,e.showAddFilesPanel?h(S,_extends({key:"AddFiles"},e,{isSizeMD:s})):null),h(T,null,e.fileCardFor?h(O,_extends({key:"FileCard"},e)):null),h(T,null,e.activePickerPanel?h(D,_extends({key:"Picker"},e)):null),h(T,null,e.showFileEditor?h(B,_extends({key:"Editor"},e)):null),h("div",{className:"uppy-Dashboard-progressindicators"},e.progressindicators.map((t=>e.uppy.getPlugin(t.id).render(e.state)))))));return p}function _classPrivateFieldLooseBase(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var M=0;function _classPrivateFieldLooseKey(e){return"__private_"+M+++"_"+e}const N={version:"4.3.2"};const _=d.default||d;const U=9;const x=27;function createPromise(){const e={};e.promise=new Promise(((t,i)=>{e.resolve=t;e.reject=i}));return e}const H={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:false,defaultPickerIcon:n,showLinkToFileUploadResult:false,showProgressDetails:false,hideUploadButton:false,hideCancelButton:false,hideRetryButton:false,hidePauseResumeButton:false,hideProgressAfterFinish:false,note:null,singleFileFullScreen:true,disableStatusBar:false,disableInformer:false,disableThumbnailGenerator:false,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:true,showSelectedFiles:true,showRemoveButtonAfterComplete:false,showNativePhotoCameraButton:false,showNativeVideoCameraButton:false,theme:"light",autoOpen:null,disabled:false,disableLocalFiles:false,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:false,animateOpenClose:true,browserBackButtonClose:false,closeAfterFinish:false,closeModalOnClickOutside:false,disablePageScrollWhenModalOpen:true,trigger:null,width:750,height:550};var q=_classPrivateFieldLooseKey("disabledNodes");var W=_classPrivateFieldLooseKey("generateLargeThumbnailIfSingleFile");var j=_classPrivateFieldLooseKey("openFileEditorWhenFilesAdded");var z=_classPrivateFieldLooseKey("attachRenderFunctionToTarget");var G=_classPrivateFieldLooseKey("isTargetSupported");var K=_classPrivateFieldLooseKey("getAcquirers");var V=_classPrivateFieldLooseKey("getProgressIndicators");var $=_classPrivateFieldLooseKey("getEditors");var Q=_classPrivateFieldLooseKey("addSpecifiedPluginsFromOptions");var X=_classPrivateFieldLooseKey("autoDiscoverPlugins");var Y=_classPrivateFieldLooseKey("addSupportedPluginIfNoTarget");var J=_classPrivateFieldLooseKey("getStatusBarOpts");var Z=_classPrivateFieldLooseKey("getThumbnailGeneratorOpts");var ee=_classPrivateFieldLooseKey("getInformerOpts");var te=_classPrivateFieldLooseKey("getStatusBarId");var ie=_classPrivateFieldLooseKey("getThumbnailGeneratorId");var se=_classPrivateFieldLooseKey("getInformerId");class Dashboard extends e{constructor(e,n){var d,p,u;const h=(d=n==null?void 0:n.autoOpen)!=null?d:null;super(e,{...H,...n,autoOpen:h});Object.defineProperty(this,se,{value:_getInformerId2});Object.defineProperty(this,ie,{value:_getThumbnailGeneratorId2});Object.defineProperty(this,te,{value:_getStatusBarId2});Object.defineProperty(this,ee,{value:_getInformerOpts2});Object.defineProperty(this,Z,{value:_getThumbnailGeneratorOpts2});Object.defineProperty(this,J,{value:_getStatusBarOpts2});Object.defineProperty(this,q,{writable:true,value:void 0});this.modalName=`uppy-Dashboard-${r()}`;this.superFocus=createSuperFocus();this.ifFocusedOnUppyRecently=false;this.removeTarget=e=>{const t=this.getPluginState();const i=t.targets.filter((t=>t.id!==e.id));this.setPluginState({targets:i})};this.addTarget=e=>{const t=e.id||e.constructor.name;const i=e.title||t;const s=e.type;if(s!=="acquirer"&&s!=="progressindicator"&&s!=="editor"){const e="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";this.uppy.log(e,"error");return null}const o={id:t,name:i,type:s};const a=this.getPluginState();const l=a.targets.slice();l.push(o);this.setPluginState({targets:l});return this.el};this.hideAllPanels=()=>{var e;const t=this.getPluginState();const i={activePickerPanel:void 0,showAddFilesPanel:false,activeOverlayType:null,fileCardFor:null,showFileEditor:false};if(t.activePickerPanel!==i.activePickerPanel||t.showAddFilesPanel!==i.showAddFilesPanel||t.showFileEditor!==i.showFileEditor||t.activeOverlayType!==i.activeOverlayType){this.setPluginState(i);this.uppy.emit("dashboard:close-panel",(e=t.activePickerPanel)==null?void 0:e.id)}};this.showPanel=e=>{const{targets:t}=this.getPluginState();const i=t.find((t=>t.type==="acquirer"&&t.id===e));this.setPluginState({activePickerPanel:i,activeOverlayType:"PickerPanel"});this.uppy.emit("dashboard:show-panel",e)};this.canEditFile=e=>{const{targets:t}=this.getPluginState();const i=_classPrivateFieldLooseBase(this,$)[$](t);return i.some((t=>this.uppy.getPlugin(t.id).canEditFile(e)))};this.openFileEditor=e=>{const{targets:t}=this.getPluginState();const i=_classPrivateFieldLooseBase(this,$)[$](t);this.setPluginState({showFileEditor:true,fileCardFor:e.id||null,activeOverlayType:"FileEditor"});i.forEach((t=>{this.uppy.getPlugin(t.id).selectFile(e)}))};this.closeFileEditor=()=>{const{metaFields:e}=this.getPluginState();const t=e&&e.length>0;t?this.setPluginState({showFileEditor:false,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:false,fileCardFor:null,activeOverlayType:"AddFiles"})};this.saveFileEditor=()=>{const{targets:e}=this.getPluginState();const t=_classPrivateFieldLooseBase(this,$)[$](e);t.forEach((e=>{this.uppy.getPlugin(e.id).save()}));this.closeFileEditor()};this.openModal=()=>{const{promise:e,resolve:t}=createPromise();this.savedScrollPosition=window.pageYOffset;this.savedActiveElement=document.activeElement;this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed");if(this.opts.animateOpenClose&&this.getPluginState().isClosing){const handler=()=>{this.setPluginState({isHidden:false});this.el.removeEventListener("animationend",handler,false);t()};this.el.addEventListener("animationend",handler,false)}else{this.setPluginState({isHidden:false});t()}this.opts.browserBackButtonClose&&this.updateBrowserHistory();document.addEventListener("keydown",this.handleKeyDownInModal);this.uppy.emit("dashboard:modal-open");return e};this.closeModal=e=>{var t;const i=(t=e==null?void 0:e.manualClose)==null||t;const{isHidden:s,isClosing:o}=this.getPluginState();if(s||o)return;const{promise:a,resolve:l}=createPromise();this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed");if(this.opts.animateOpenClose){this.setPluginState({isClosing:true});const handler=()=>{this.setPluginState({isHidden:true,isClosing:false});this.superFocus.cancel();this.savedActiveElement.focus();this.el.removeEventListener("animationend",handler,false);l()};this.el.addEventListener("animationend",handler,false)}else{this.setPluginState({isHidden:true});this.superFocus.cancel();this.savedActiveElement.focus();l()}document.removeEventListener("keydown",this.handleKeyDownInModal);if(i&&this.opts.browserBackButtonClose){var n;(n=history.state)!=null&&n[this.modalName]&&history.back()}this.uppy.emit("dashboard:modal-closed");return a};this.isModalOpen=()=>!this.getPluginState().isHidden||false;this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();this.setDarkModeCapability=e=>{const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})};this.handleSystemDarkModeChange=e=>{const t=e.matches;this.uppy.log("[Dashboard] Dark mode is "+(t?"on":"off"));this.setDarkModeCapability(t)};this.toggleFileCard=(e,t)=>{const i=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",i):this.uppy.emit("dashboard:file-edit-complete",i);this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})};this.toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})};this.addFiles=e=>{const t=e.map((e=>({source:this.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||e.webkitRelativePath||null}})));try{this.uppy.addFiles(t)}catch(e){this.uppy.log(e)}};this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver((e=>{const t=e[0];const{width:i,height:s}=t.contentRect;this.setPluginState({containerWidth:i,containerHeight:s,areInsidesReadyToBeVisible:true})}));this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner"));this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout((()=>{const e=this.getPluginState();const t=!this.opts.inline&&e.isHidden;if(!e.areInsidesReadyToBeVisible&&!t){this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning");this.setPluginState({areInsidesReadyToBeVisible:true})}}),1e3)};this.stopListeningToResize=()=>{this.resizeObserver.disconnect();clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};this.recordIfFocusedOnUppyRecently=e=>{if(this.el.contains(e.target))this.ifFocusedOnUppyRecently=true;else{this.ifFocusedOnUppyRecently=false;this.superFocus.cancel()}};this.disableInteractiveElements=e=>{var t;const i=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'];const s=(t=_classPrivateFieldLooseBase(this,q)[q])!=null?t:a(this.el.querySelectorAll(i)).filter((e=>!e.classList.contains("uppy-Dashboard-close")));for(const t of s)t.tagName==="A"?t.setAttribute("aria-disabled",e):t.disabled=e;_classPrivateFieldLooseBase(this,q)[q]=e?s:null;this.dashboardIsDisabled=e};this.updateBrowserHistory=()=>{var e;(e=history.state)!=null&&e[this.modalName]||history.pushState({...history.state,[this.modalName]:true},"");window.addEventListener("popstate",this.handlePopState,false)};this.handlePopState=e=>{var t;!this.isModalOpen()||e.state&&e.state[this.modalName]||this.closeModal({manualClose:false});!this.isModalOpen()&&(t=e.state)!=null&&t[this.modalName]&&history.back()};this.handleKeyDownInModal=e=>{e.keyCode===x&&this.requestCloseModal();e.keyCode===U&&trapFocus(e,this.getPluginState().activeOverlayType,this.el)};this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};this.handlePaste=e=>{this.uppy.iteratePlugins((t=>{t.type==="acquirer"&&(t.handleRootPaste==null||t.handleRootPaste(e))}));const t=a(e.clipboardData.files);if(t.length>0){this.uppy.log("[Dashboard] Files pasted");this.addFiles(t)}};this.handleInputChange=e=>{e.preventDefault();const t=a(e.currentTarget.files||[]);if(t.length>0){this.uppy.log("[Dashboard] Files selected through input");this.addFiles(t)}};this.handleDragOver=e=>{e.preventDefault();e.stopPropagation();const canSomePluginHandleRootDrop=()=>{let t=true;this.uppy.iteratePlugins((i=>{i.canHandleRootDrop!=null&&i.canHandleRootDrop(e)&&(t=true)}));return t};const doesEventHaveFiles=()=>{const{types:t}=e.dataTransfer;return t.some((e=>e==="Files"))};const t=canSomePluginHandleRootDrop();const i=doesEventHaveFiles();if(!t&&!i||this.opts.disabled||this.opts.disableLocalFiles&&(i||!t)||!this.uppy.getState().allowNewUpload)e.dataTransfer.dropEffect="none";else{e.dataTransfer.dropEffect="copy";this.setPluginState({isDraggingOver:true});this.opts.onDragOver(e)}};this.handleDragLeave=e=>{e.preventDefault();e.stopPropagation();this.setPluginState({isDraggingOver:false});this.opts.onDragLeave(e)};this.handleDrop=async e=>{e.preventDefault();e.stopPropagation();this.setPluginState({isDraggingOver:false});this.uppy.iteratePlugins((t=>{t.type==="acquirer"&&(t.handleRootDrop==null||t.handleRootDrop(e))}));let t=false;const logDropError=e=>{this.uppy.log(e,"error");if(!t){this.uppy.info(e.message,"error");t=true}};this.uppy.log("[Dashboard] Processing dropped files");const i=await l(e.dataTransfer,{logDropError:logDropError});if(i.length>0){this.uppy.log("[Dashboard] Files dropped");this.addFiles(i)}this.opts.onDrop(e)};this.handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)};this.handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)};this.handleKeyDownInInline=e=>{e.keyCode===U&&forInline(e,this.getPluginState().activeOverlayType,this.el)};this.handlePasteOnBody=e=>{const t=this.el.contains(document.activeElement);t&&this.handlePaste(e)};this.handleComplete=e=>{let{failed:t}=e;!this.opts.closeAfterFinish||t!=null&&t.length||this.requestCloseModal()};this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")};Object.defineProperty(this,W,{writable:true,value:()=>{if(this.opts.disableThumbnailGenerator)return;const e=600;const t=this.uppy.getFiles();if(t.length===1){const i=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);i==null||i.setOptions({thumbnailWidth:e});const s={...t[0],preview:void 0};i==null||i.requestThumbnail(s).then((()=>{i==null||i.setOptions({thumbnailWidth:this.opts.thumbnailWidth})}))}}});Object.defineProperty(this,j,{writable:true,value:e=>{const t=e[0];const{metaFields:i}=this.getPluginState();const s=i&&i.length>0;const o=this.canEditFile(t);s&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(true,t.id):o&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(t)}});this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const e=o(this.opts.trigger);e?e.forEach((e=>e.addEventListener("click",this.openModal))):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize();document.addEventListener("paste",this.handlePasteOnBody);this.uppy.on("plugin-added",_classPrivateFieldLooseBase(this,Y)[Y]);this.uppy.on("plugin-remove",this.removeTarget);this.uppy.on("file-added",this.hideAllPanels);this.uppy.on("dashboard:modal-closed",this.hideAllPanels);this.uppy.on("complete",this.handleComplete);this.uppy.on("files-added",_classPrivateFieldLooseBase(this,W)[W]);this.uppy.on("file-removed",_classPrivateFieldLooseBase(this,W)[W]);document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,true);document.addEventListener("click",this.recordIfFocusedOnUppyRecently,true);this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline);this.opts.autoOpen&&this.uppy.on("files-added",_classPrivateFieldLooseBase(this,j)[j])};this.removeEvents=()=>{const e=o(this.opts.trigger);!this.opts.inline&&e&&e.forEach((e=>e.removeEventListener("click",this.openModal)));this.stopListeningToResize();document.removeEventListener("paste",this.handlePasteOnBody);window.removeEventListener("popstate",this.handlePopState,false);this.uppy.off("plugin-added",_classPrivateFieldLooseBase(this,Y)[Y]);this.uppy.off("plugin-remove",this.removeTarget);this.uppy.off("file-added",this.hideAllPanels);this.uppy.off("dashboard:modal-closed",this.hideAllPanels);this.uppy.off("complete",this.handleComplete);this.uppy.off("files-added",_classPrivateFieldLooseBase(this,W)[W]);this.uppy.off("file-removed",_classPrivateFieldLooseBase(this,W)[W]);document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently);document.removeEventListener("click",this.recordIfFocusedOnUppyRecently);this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline);this.opts.autoOpen&&this.uppy.off("files-added",_classPrivateFieldLooseBase(this,j)[j])};this.superFocusOnEachUpdate=()=>{const e=this.el.contains(document.activeElement);const t=document.activeElement===document.body||document.activeElement===null;const i=this.uppy.getState().info.length===0;const s=!this.opts.inline;i&&(s||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};this.afterUpdate=()=>{if(!this.opts.disabled||this.dashboardIsDisabled){!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(false);this.superFocusOnEachUpdate()}else this.disableInteractiveElements(true)};this.saveFileCard=(e,t)=>{this.uppy.setFileMeta(t,e);this.toggleFileCard(false,t)};Object.defineProperty(this,z,{writable:true,value:e=>{const t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}}});Object.defineProperty(this,G,{writable:true,value:e=>{const t=this.uppy.getPlugin(e.id);return typeof t.isSupported!=="function"||t.isSupported()}});Object.defineProperty(this,K,{writable:true,value:_((e=>e.filter((e=>e.type==="acquirer"&&_classPrivateFieldLooseBase(this,G)[G](e))).map(_classPrivateFieldLooseBase(this,z)[z])))});Object.defineProperty(this,V,{writable:true,value:_((e=>e.filter((e=>e.type==="progressindicator")).map(_classPrivateFieldLooseBase(this,z)[z])))});Object.defineProperty(this,$,{writable:true,value:_((e=>e.filter((e=>e.type==="editor")).map(_classPrivateFieldLooseBase(this,z)[z])))});this.render=e=>{const t=this.getPluginState();const{files:i,capabilities:s,allowNewUpload:o}=e;const{newFiles:a,uploadStartedFiles:l,completeFiles:n,erroredFiles:r,inProgressFiles:d,inProgressNotPausedFiles:p,processingFiles:u,isUploadStarted:h,isAllComplete:c,isAllPaused:m}=this.uppy.getObjectOfFilesPerState();const g=_classPrivateFieldLooseBase(this,K)[K](t.targets);const y=_classPrivateFieldLooseBase(this,V)[V](t.targets);const f=_classPrivateFieldLooseBase(this,$)[$](t.targets);let v;v=this.opts.theme==="auto"?s.darkMode?"dark":"light":this.opts.theme;if(["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0){this.opts.fileManagerSelectionType="files";console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)}return Dashboard$1({state:e,isHidden:t.isHidden,files:i,newFiles:a,uploadStartedFiles:l,completeFiles:n,erroredFiles:r,inProgressFiles:d,inProgressNotPausedFiles:p,processingFiles:u,isUploadStarted:h,isAllComplete:c,isAllPaused:m,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:o,acquirers:g,theme:v,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:y,editors:f,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:s.resumableUploads||false,individualCancellation:s.individualCancellation,isMobileDevice:s.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})};Object.defineProperty(this,Q,{writable:true,value:()=>{const{plugins:e}=this.opts;e.forEach((e=>{const t=this.uppy.getPlugin(e);t?t.mount(this,t):this.uppy.log(`[Uppy] Dashboard could not find plugin '${e}', make sure to uppy.use() the plugins you are specifying`,"warning")}))}});Object.defineProperty(this,X,{writable:true,value:()=>{this.uppy.iteratePlugins(_classPrivateFieldLooseBase(this,Y)[Y])}});Object.defineProperty(this,Y,{writable:true,value:e=>{var t;const i=["acquirer","editor"];if(e&&!((t=e.opts)!=null&&t.target)&&i.includes(e.type)){const t=this.getPluginState().targets.some((t=>e.id===t.id));t||e.mount(this,e)}}});this.install=()=>{this.setPluginState({isHidden:true,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:false,activePickerPanel:void 0,showFileEditor:false,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:false,isDraggingOver:false});const{inline:e,closeAfterFinish:o}=this.opts;if(e&&o)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:a,allowMultipleUploadBatches:l}=this.uppy.opts;(a||l)&&o&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:n}=this.opts;n&&this.mount(n,this);this.opts.disableStatusBar||this.uppy.use(t,{id:_classPrivateFieldLooseBase(this,te)[te](),target:this,..._classPrivateFieldLooseBase(this,J)[J]()});this.opts.disableInformer||this.uppy.use(i,{id:_classPrivateFieldLooseBase(this,se)[se](),target:this,..._classPrivateFieldLooseBase(this,ee)[ee]()});this.opts.disableThumbnailGenerator||this.uppy.use(s,{id:_classPrivateFieldLooseBase(this,ie)[ie](),..._classPrivateFieldLooseBase(this,Z)[Z]()});this.darkModeMediaQuery=typeof window!=="undefined"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const r=!!this.darkModeMediaQuery&&this.darkModeMediaQuery.matches;this.uppy.log("[Dashboard] Dark mode is "+(r?"on":"off"));this.setDarkModeCapability(r);if(this.opts.theme==="auto"){var d;(d=this.darkModeMediaQuery)==null||d.addListener(this.handleSystemDarkModeChange)}_classPrivateFieldLooseBase(this,Q)[Q]();_classPrivateFieldLooseBase(this,X)[X]();this.initEvents()};this.uninstall=()=>{if(!this.opts.disableInformer){const e=this.uppy.getPlugin(`${this.id}:Informer`);e&&this.uppy.removePlugin(e)}if(!this.opts.disableStatusBar){const e=this.uppy.getPlugin(`${this.id}:StatusBar`);e&&this.uppy.removePlugin(e)}if(!this.opts.disableThumbnailGenerator){const e=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);e&&this.uppy.removePlugin(e)}const{plugins:e}=this.opts;e.forEach((e=>{const t=this.uppy.getPlugin(e);t&&t.unmount()}));if(this.opts.theme==="auto"){var t;(t=this.darkModeMediaQuery)==null||t.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed");this.unmount();this.removeEvents()};this.id=this.opts.id||"Dashboard";this.title="Dashboard";this.type="orchestrator";this.defaultLocale=E;this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear();this.requestCloseModal()});(u=(p=this.opts).onRequestCloseModal)!=null?u:p.onRequestCloseModal=()=>this.closeModal();this.i18nInit()}setOptions(e){var t,i;super.setOptions(e);(t=this.uppy.getPlugin(_classPrivateFieldLooseBase(this,te)[te]()))==null||t.setOptions(_classPrivateFieldLooseBase(this,J)[J]());(i=this.uppy.getPlugin(_classPrivateFieldLooseBase(this,ie)[ie]()))==null||i.setOptions(_classPrivateFieldLooseBase(this,Z)[Z]())}}function _getStatusBarOpts2(){const{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:i,hideCancelButton:s,showProgressDetails:o,hideProgressAfterFinish:a,locale:l,doneButtonHandler:n}=this.opts;return{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:i,hideCancelButton:s,showProgressDetails:o,hideAfterFinish:a,locale:l,doneButtonHandler:n}}function _getThumbnailGeneratorOpts2(){const{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:i,waitForThumbnailsBeforeUpload:s}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:i,waitForThumbnailsBeforeUpload:s,lazy:!s}}function _getInformerOpts2(){return{}}function _getStatusBarId2(){return`${this.id}:StatusBar`}function _getThumbnailGeneratorId2(){return`${this.id}:ThumbnailGenerator`}function _getInformerId2(){return`${this.id}:Informer`}Dashboard.VERSION=N.version;export{Dashboard as default};

