// retry@0.13.1 downloaded from https://ga.jspm.io/npm:retry@0.13.1/index.js

import r from"@retry/lib/retry_operation";var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};var o=r;e.operation=function(r){var t=e.timeouts(r);return new o(t,{forever:r&&(r.forever||Infinity===r.retries),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};e.timeouts=function(r){if(r instanceof Array)return[].concat(r);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:Infinity,randomize:false};for(var e in r)t[e]=r[e];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");var o=[];for(var i=0;i<t.retries;i++)o.push(this.createTimeout(i,t));r&&r.forever&&!o.length&&o.push(this.createTimeout(i,t));o.sort((function(r,t){return r-t}));return o};e.createTimeout=function(r,t){var e=t.randomize?Math.random()+1:1;var o=Math.round(e*Math.max(t.minTimeout,1)*Math.pow(t.factor,r));o=Math.min(o,t.maxTimeout);return o};e.wrap=function(r,o,i){if(o instanceof Array){i=o;o=null}if(!i){i=[];for(var a in r)"function"===typeof r[a]&&i.push(a)}for(var n=0;n<i.length;n++){var u=i[n];var f=r[u];r[u]=function retryWrapper(i){var a=e.operation(o);var n=Array.prototype.slice.call(arguments,1);var u=n.pop();n.push((function(r){if(!a.retry(r)){r&&(arguments[0]=a.mainError());u.apply(this||t,arguments)}}));a.attempt((function(){i.apply(r,n)}))}.bind(r,f);r[u].options=o}};const i=e.operation,a=e.timeouts,n=e.createTimeout,u=e.wrap;export default e;export{n as createTimeout,i as operation,a as timeouts,u as wrap};

